---
page-layout: article
toc: true
section-divs: false
keep-md: false
format:
  html:
    anchor-sections: false
include-in-header:
  text: |
    <style>
      /* Layout + typography */
      main.content { max-width: 900px; }
      body { line-height: 1.65; }
      h2 { border-bottom: none; margin-top: 1.6rem; }

      /* Top links row */
      .profile-links{
        display:flex;
        gap:.75rem;
        justify-content:center;
        flex-wrap:wrap;
        margin: .25rem 0 1.25rem 0;
      }
      .icon-link{
        display:inline-flex;
        align-items:center;
        gap:.45rem;
        padding:.35rem .7rem;
        border:1px solid rgba(0,0,0,.12);
        border-radius:999px;
        text-decoration:none;
        font-size:.95rem;
      }
      .icon-link:hover{ text-decoration:none; border-color: rgba(0,0,0,.25); }

      /* Publications list as “cards” */
      .pub-list{ list-style:none; padding-left:0; margin:0; }
      .pub{
        padding: .9rem 1rem;
        margin: 0 0 .9rem 0;
        border: 1px solid rgba(0,0,0,.10);
        border-radius: 12px;
        background: rgba(0,0,0,.015);
      }
      .pub-title{
        font-weight: 650;
        font-size: 1.02rem;
        margin: 0 0 .15rem 0;
      }
      .pub-title a{
        text-decoration: none;
      }
      .pub-title a:hover{
        text-decoration: underline;
      }
      .pub-meta{
        color: rgba(0,0,0,.68);
        font-size: .96rem;
      }
      .pub-meta em{ font-style: italic; }
      .pub-year{
        display:inline-block;
        margin-left:.35rem;
        padding:.05rem .45rem;
        border-radius: 999px;
        border: 1px solid rgba(0,0,0,.12);
        font-size: .82rem;
        color: rgba(0,0,0,.65);
      }

      /* Details/Abstract */
      details.pub-details { margin-top: .45rem; }
      details.pub-details summary{
        cursor:pointer;
        user-select:none;
        color: inherit;
        font-size: .92rem;
      }
      details.pub-details[open] summary{ margin-bottom:.35rem; }
      .pub-summary{
        margin: 0;
        color: rgba(0,0,0,.70);
        font-size: .95rem;
      }

      /* Optional: bold your name without HTML injection */
      .me{ font-weight:700; }
    </style>
---


```{r setup, include=FALSE}
library(tidyverse)
library(googlesheets4)
library(pander)
library(kableExtra)
library(htmltools)
library(fontawesome)

get_cv_sheet <- function(sheet) {
    return(read_sheet(
        ss = 'https://docs.google.com/spreadsheets/d/1uLEK1UTYKKJBWfenDIvAHgOH4LwX3f8C2hzU22R_DMU/edit?usp=sharing',
        sheet = sheet
    ))
}

icon_link <- function(
  icon = NULL,
  text = NULL,
  url = NULL,
  class = "icon-link",
  target = "_blank"
) {
  if (!is.null(icon)) {
    text <- make_icon_text(icon, text)
  }
  return(htmltools::a(
    href = url, text, class = class, target = target, rel = "noopener"
  ))
}

make_icon_text <- function(icon, text) {
  return(HTML(paste0(make_icon(icon), " ", text)))
}

make_icon <- function(icon) {
  return(tag("i", list(class = icon)))
}
```


<center>

`r htmltools::HTML(paste0(icon_link(icon = "ai ai-google-scholar", text = "Google Scholar", url  = "https://scholar.google.com/citations?user=CtLI42kAAAAJ&hl=en"), icon_link(icon = "ai ai-orcid", text = "ORCID", url  = "https://orcid.org/0000-0003-0237-7410")))`

</center>





## Working papers


```{r, echo=FALSE, warning=FALSE,message=FALSE, results='asis'}
# get pubs
pubs_raw = get_cv_sheet("pubs") |> 
    filter(category == "working_paper")
  

pubs_raw |> 
  arrange(desc(pub_date)) |> 
  mutate(item = glue::glue(
    "<li style='margin-bottom: 1.5em; line-height: 1.6;'>
      <strong style='font-size: 1.05em;'>{ifelse(!is.na(url), paste0('<a href=\"', url, '\" style=\"color: #2c5aa0; text-decoration: none;\">',
title, '</a>'), title)}</strong><br>
      <span style='color: #555;'>{author}</span><br>
      {ifelse(!is.na(summary), paste0(
        '<details style=\"margin-top: 0.5em;\">
          <summary style=\"cursor: pointer; color: #2c5aa0; font-size: 0.9em;\">Abstract</summary>
          <p style=\"margin-top: 0.5em; color: #555; font-size: 0.95em;\">', summary, '</p>
        </details>'
      ), '')}
    </li>"
  )) |>
  pull(item) |>
  (\(x) cat("<ul style='list-style-type: none; padding-left: 0;'>\n", 
            paste(x, collapse = "\n"), 
            "\n</ul>"))()
```



## Peer-reviewed


```{r, echo=FALSE, warning=FALSE,message=FALSE, results='asis'}
# get pubs
pubs_raw = get_cv_sheet("pubs") |> 
    filter(category == "peer_reviewed")
  
# clean up
pubs = pubs_raw |> 
    mutate(
    journal  = ifelse(is.na(journal), '', paste0('<i>', journal, '</i>')),
    number   = ifelse(is.na(number), '', paste0(number, '.')),
  )

pubs |> 
  arrange(desc(pub_date)) |> 
  mutate(item = glue::glue(
    "<li style='margin-bottom: 1.5em; line-height: 1.6;'>
      <strong style='font-size: 1.05em;'>{ifelse(!is.na(url), paste0('<a href=\"', url, '\" style=\"color: #2c5aa0; text-decoration: none;\">',
title, '</a>'), title)}</strong><br>
      <span style='color: #555;'>{author}</span><br>
      <em style='color: #777;'>{journal}</em>
      {ifelse(!is.na(pub_date), paste0(' (', format(pub_date, '%Y'), ')'), '')}
      {ifelse(!is.na(summary), paste0(
        '<details style=\"margin-top: 0.5em;\">
          <summary style=\"cursor: pointer; color: #2c5aa0; font-size: 0.9em;\">Abstract</summary>
          <p style=\"margin-top: 0.5em; color: #555; font-size: 0.95em;\">', summary, '</p>
        </details>'
      ), '')}
    </li>"
  )) |>
  pull(item) |>
  (\(x) cat("<ul style='list-style-type: none; padding-left: 0;'>\n", 
            paste(x, collapse = "\n"), 
            "\n</ul>"))()
```




```{r, echo=FALSE, warning=FALSE,message=FALSE, results='asis', eval = FALSE}
# get pubs
pubs_raw = get_cv_sheet("pubs") |> 
    filter(category == "working_paper")
  
# clean up
pubs = pubs_raw |> 
    mutate(
    author = str_replace(author, "JF Tellez", "<b>JF Tellez</b>")
  )


pubs |>
  arrange(desc(pub_date)) |>
  mutate(title = ifelse(!is.na(url), cell_spec(title, "html", link = url),
                        title)) |>
  select(year, title, author) |>
  kable(format = "html", escape = FALSE, align = "rlcc",
        col.names = NULL) %>%
  kable_styling(bootstrap_options = c("hover", "responsive"))

# pubs |>
#   mutate(title = cell_spec(title, "html", link = url)) |>
#   mutate(citation = paste(title, "(", year, ")", "<br>", journal, "<br>", author)) |>
#   arrange(desc(pub_date)) |>
#   pull(citation) |>
#   pandoc.list(style = 'bullet', loose = TRUE)
```



```{r, echo=FALSE, warning=FALSE,message=FALSE, results='asis', eval = FALSE}
# get pubs
pubs_raw = get_cv_sheet("pubs") |> 
    filter(category == "peer_reviewed")
  
# clean up
pubs = pubs_raw |> 
    mutate(
    journal  = ifelse(is.na(journal), '', paste0('<i>', journal, '</i>')),
    number   = ifelse(is.na(number), '', paste0(number, '.')),
    author = str_replace(author, "JF Tellez", "<b>JF Tellez</b>")
  )


pubs |>
  arrange(desc(pub_date)) |>
  mutate(title = ifelse(!is.na(url), cell_spec(title, "html", link = url),
                        title)) |>
  select(year, title, journal, author) |>
  kable(format = "html", escape = FALSE, align = "rlcc",
        col.names = NULL) %>%
  kable_styling(bootstrap_options = c("hover", "responsive"))

# pubs |>
#   mutate(title = cell_spec(title, "html", link = url)) |>
#   mutate(citation = paste(title, "(", year, ")", "<br>", journal, "<br>", author)) |>
#   arrange(desc(pub_date)) |>
#   pull(citation) |>
#   pandoc.list(style = 'bullet', loose = TRUE)
```



## Other writing

Book chapters, reports, blogs...

```{r, echo=FALSE, warning=FALSE,message=FALSE, results='asis'}
# get pubs
pubs_raw = get_cv_sheet("pubs") |> 
    filter(category %in% c("book_chapter", "report")) |> 
  filter(!str_detect(title, "indicators"))
  
# clean up
pubs = pubs_raw |> 
    mutate(
    journal  = ifelse(is.na(journal), '', paste0('<i>', journal, '</i>')),
    number   = ifelse(is.na(number), '', paste0(number, '.')),
  )


pubs |> 
  arrange(desc(pub_date)) |> 
  mutate(item = glue::glue(
    "<li style='margin-bottom: 1.5em; line-height: 1.6;'>
      <strong style='font-size: 1.05em;'>{ifelse(!is.na(url), paste0('<a href=\"', url, '\" style=\"color: #2c5aa0; text-decoration: none;\">',
title, '</a>'), title)}</strong><br>
      {ifelse(!is.na(author), paste0('<span style=\"color: #555;\">', author, '</span><br>'), '')}
      <em style='color: #777;'>{journal}</em>
      {ifelse(!is.na(pub_date), paste0(' (', format(pub_date, '%Y'), ')'), '')}
      {ifelse(!is.na(summary), paste0(
        '<details style=\"margin-top: 0.5em;\">
          <summary style=\"cursor: pointer; color: #2c5aa0; font-size: 0.9em;\">Abstract</summary>
          <p style=\"margin-top: 0.5em; color: #555; font-size: 0.95em;\">', summary, '</p>
        </details>'
      ), '')}
    </li>"
  )) |>
  pull(item) |>
  (\(x) cat("<ul style='list-style-type: none; padding-left: 0;'>\n", 
            paste(x, collapse = "\n"), 
            "\n</ul>"))()
```





