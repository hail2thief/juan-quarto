{
  "hash": "a3487c8fe37c8523b39bed7479e53750",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The `juanr` package\"\nsubtitle: \"Some datasets for teaching and poking around\"\nauthor: \"Juan Tellez\"\ndate: \"2026-02-20\"\ntoc: true\ncategories: [R, data, teaching]\n---\n\n\n\n\n\n![](../images/juanr-sticker.png){fig-align=\"center\" width=\"25%\"}\n\nI maintain an R package called `juanr` that I use for teaching. It's a grab-bag of 30+ datasets that I've collected over the years from published research, government sources, and the occasional fun API. I use them for in-class exercises, problem sets, and demos.\n\nYou can install it from GitHub:\n\n```r\nremotes::install_github(\"hail2thief/juanr\")\n```\n\nThe full list of datasets is on the [GitHub repo](https://github.com/hail2thief/juanr). Most of the datasets are ready to go: clean names, reasonable variable types, no encoding nightmares. Below I want to highlight three of the less obvious ones that I think are interesting in their own right.\n\n\n# Art auction prices\n\nThe `art` dataset has about 18,000 records from art auctions around the world, from a [2024 study](https://doi.org/10.1038/s41598-024-72275-z) on what predicts art prices. It includes the sale price, the artist's nationality and gender, and whether they went to an elite art school.\n\nOne natural question: how big is the gender gap in art prices?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nart |>\n  filter(real_price_usd > 0) |>\n  mutate(gender = if_else(gender_male == 1, \"Male\", \"Female\")) |>\n  ggplot(aes(x = real_price_usd, fill = gender)) +\n  geom_density(alpha = 0.6, color = NA) +\n  scale_x_log10(labels = scales::dollar_format()) +\n  scale_fill_manual(values = pal[c(1, 7)]) +\n  labs(\n    title = \"Art sold by women sells for less\",\n    subtitle = \"Distribution of auction prices (log scale) by artist gender\",\n    x = \"Sale price (USD)\",\n    y = \"Density\",\n    fill = NULL\n  )\n```\n\n::: {.cell-output-display}\n![](juanr_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nThe gap is substantial. Part of this is selection — the art world has historically funneled resources and attention toward male artists, so the women who make it to auction are a different population. But even conditional on being auctioned, male artists command higher prices.\n\nDoes going to an elite art school help? Here's the median price by gender and elite school attendance:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nart |>\n  filter(real_price_usd > 0) |>\n  mutate(\n    gender = if_else(gender_male == 1, \"Male\", \"Female\"),\n    school = if_else(elite_school == 1, \"Elite school\", \"Non-elite school\")\n  ) |>\n  summarise(\n    `Median price (USD)` = median(real_price_usd),\n    `N` = n(),\n    .by = c(gender, school)\n  ) |>\n  arrange(school, gender) |>\n  mutate(`Median price (USD)` = scales::dollar(`Median price (USD)`)) |>\n  kableExtra::kbl(\n    col.names = c(\"Gender\", \"School\", \"Median price\", \"N\"),\n    align = \"llrc\",\n    booktabs = TRUE\n  ) |>\n  kableExtra::kable_styling(\n    full_width = FALSE,\n    bootstrap_options = c(\"striped\", \"hover\"),\n    position = \"center\"\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Gender </th>\n   <th style=\"text-align:left;\"> School </th>\n   <th style=\"text-align:right;\"> Median price </th>\n   <th style=\"text-align:center;\"> N </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Female </td>\n   <td style=\"text-align:left;\"> Elite school </td>\n   <td style=\"text-align:right;\"> $30,564.00 </td>\n   <td style=\"text-align:center;\"> 342 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Male </td>\n   <td style=\"text-align:left;\"> Elite school </td>\n   <td style=\"text-align:right;\"> $25,809.00 </td>\n   <td style=\"text-align:center;\"> 2951 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Female </td>\n   <td style=\"text-align:left;\"> Non-elite school </td>\n   <td style=\"text-align:right;\"> $18,357.00 </td>\n   <td style=\"text-align:center;\"> 1338 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Male </td>\n   <td style=\"text-align:left;\"> Non-elite school </td>\n   <td style=\"text-align:right;\"> $22,490.00 </td>\n   <td style=\"text-align:center;\"> 9178 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> $14,852.50 </td>\n   <td style=\"text-align:center;\"> 614 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nElite school helps, but the gender gap persists within both categories. The art world is not exactly known for meritocracy.\n\n\n# Vietnam War hamlets\n\nThe `vietnam` dataset comes from [Kalyvas and Kocher (2009)](https://doi.org/10.1017/S0003055409090194) and contains over 70,000 hamlet-month observations from the Hamlet Evaluation System (HES) — the US military's attempt to track \"progress\" during the Vietnam War. Each hamlet was assessed on who controlled it (the government, the Vietcong, or somewhere in between), along with information on bombing, population, and whether the Vietcong used selective terror against civilians.\n\nThe HES is a wild dataset. The US government was essentially trying to quantify a counterinsurgency in real time, rating hamlets on a control scale the way you'd rate a restaurant on Yelp.\n\nHere's the relationship between territorial control and bombing:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvietnam |>\n  filter(!is.na(control), !is.na(bombs)) |>\n  summarise(\n    avg_bombs = mean(bombs),\n    .by = control\n  ) |>\n  ggplot(aes(x = factor(control), y = avg_bombs)) +\n  geom_col(fill = pal[3], alpha = 0.8) +\n  labs(\n    title = \"Bombing intensity by territorial control\",\n    subtitle = \"Average bomb sorties per hamlet-month\",\n    x = \"Control (government \\u2190 \\u2192 Vietcong)\",\n    y = \"Average bomb sorties\",\n    caption = \"Source: Kalyvas and Kocher (2009)\"\n  )\n```\n\n::: {.cell-output-display}\n![](juanr_files/figure-html/unnamed-chunk-4-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nThe pattern is telling: bombing was concentrated in contested and Vietcong-controlled areas. Not surprising on its face, but when you think about the stated goal of winning \"hearts and minds,\" the strategy of bombing the places you're trying to win over is... something.\n\nWe can also look at the relationship between bombing and Vietcong selective violence:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvietnam |>\n  filter(!is.na(control), !is.na(selective_terror)) |>\n  summarise(\n    pct_terror = mean(selective_terror) * 100,\n    .by = control\n  ) |>\n  ggplot(aes(x = factor(control), y = pct_terror)) +\n  geom_col(fill = pal[7], alpha = 0.8) +\n  labs(\n    title = \"Selective violence follows control\",\n    subtitle = \"Percent of hamlet-months with Vietcong selective terror\",\n    x = \"Control (government \\u2190 \\u2192 Vietcong)\",\n    y = \"% with selective terror\"\n  )\n```\n\n::: {.cell-output-display}\n![](juanr_files/figure-html/unnamed-chunk-5-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nThe Vietcong used selective violence most in contested areas — exactly what the theory of irregular war would predict^[See Kalyvas, *The Logic of Violence in Civil War* (2006).]. Violence is a tool for establishing control, not a byproduct of it.\n\n\n# Colorism in Latin America\n\nThe `race` dataset comes from the 2014 wave of the [Latin American Public Opinion Project (LAPOP)](https://www.vanderbilt.edu/lapop/). Enumerators rated each respondent's skin color on a scale from 1 (lightest) to 11 (darkest) using a standardized color palette. The data covers Colombia, Brazil, Mexico, Guatemala, and the Dominican Republic.\n\nSkin color is one of those things that everyone in Latin America knows matters but that can be hard to pin down empirically. This dataset lets you see the variation:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrace |>\n  filter(!is.na(colorr), !is.na(pais)) |>\n  ggplot(aes(x = colorr)) +\n  geom_histogram(binwidth = 1, fill = pal[5], color = \"white\", alpha = 0.8) +\n  facet_wrap(~pais, scales = \"free_y\", ncol = 2) +\n  scale_x_continuous(breaks = 1:11) +\n  labs(\n    title = \"Distribution of skin color across Latin America\",\n    subtitle = \"Enumerator-rated skin color, 1 (lightest) to 11 (darkest)\",\n    x = \"Skin color\",\n    y = \"Count\",\n    caption = \"Source: LAPOP 2014\"\n  )\n```\n\n::: {.cell-output-display}\n![](juanr_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nThe distributions are pretty different across countries. Brazil and Colombia have wider spreads, while Mexico and Guatemala cluster more tightly. The Dominican Republic is interesting — recall that colorism there operates in the context of a long history of anti-Haitian politics.\n\nDoes skin color predict income? Roughly:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrace |>\n  filter(!is.na(colorr), !is.na(q10new_14), !is.na(pais)) |>\n  summarise(\n    avg_income = mean(q10new_14),\n    .by = c(pais, colorr)\n  ) |>\n  ggplot(aes(x = colorr, y = avg_income, color = pais)) +\n  geom_point(alpha = 0.7, size = 2) +\n  geom_smooth(method = \"lm\", se = FALSE, linewidth = 0.8) +\n  scale_color_manual(values = pal[c(1, 3, 5, 7, 2)]) +\n  scale_x_continuous(breaks = seq(1, 11, by = 2)) +\n  labs(\n    title = \"Darker skin, lower income\",\n    subtitle = \"Average household income by enumerator-rated skin color\",\n    x = \"Skin color (lighter \\u2192 darker)\",\n    y = \"Household income (0-16 scale)\",\n    color = NULL\n  )\n```\n\n::: {.cell-output-display}\n![](juanr_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nThe negative gradient is there in every country. This is descriptive, of course — skin color is correlated with all sorts of other things (education, geography, family wealth). But the raw relationship is striking, and consistent across very different national contexts.\n\n\n# Wrapping up\n\nThese are just three of the datasets in the package. There's also data on [coups](https://github.com/hail2thief/juanr), [campaign finance](https://github.com/hail2thief/juanr), [colonial Peru](https://github.com/hail2thief/juanr), [European elections](https://github.com/hail2thief/juanr), and — yes — [Pokémon](https://github.com/hail2thief/juanr).\n\nIf you teach with R and want some ready-to-go data that's a little more interesting than `mtcars`, feel free to take it for a spin:\n\n```r\nremotes::install_github(\"hail2thief/juanr\")\nlibrary(juanr)\ndata(package = \"juanr\")\n```\n",
    "supporting": [
      "juanr_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}